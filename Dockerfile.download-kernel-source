# Use a build environment image as the base
FROM mybuild/build-essentials

ARG KERNEL_VERSION=5.10
ARG KERNEL_FILE=linux-${KERNEL_VERSION}.tar.gz
ARG BUILD_DIR=linux-${KERNEL_VERSION}

# Download and extract kernel source
WORKDIR /usr/src

RUN wget https://cdn.kernel.org/pub/linux/kernel/v5.x/${KERNEL_FILE} && \
    tar -xf ${KERNEL_FILE} && \
    rm ${KERNEL_FILE}

# Set default command to boot into the new kernel
CMD ["/bin/bash"]